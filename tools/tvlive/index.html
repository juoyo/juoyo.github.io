
<!DOCTYPE html>  
<html>  
    <head>  
        <meta charset="UTF-8">  
        
        <!-- 解决https下请求http资源，强制讲http请求转换为https -->
        <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> -->
        <title></title> 
		<script src="hls/hls.js"></script>    <!-- hls.js必须引入，可下载至本地 -->
		<!--   <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>  -->
		
        <style type="text/css">  
           
        </style>  
    </head>  
    
    <body>  
        <div id="id1" style="solid black">
			<div id="id2" style="float:left; solid">
				<video id="video" width='auto' height="600" src="" controls="controls" autoplay muted></video>
			</div>
			
			<div>
				<font color="blue">因直播源协议多为http资源，请使用</font>
				<font color="red"><strong>非chrome浏览器访问<a href=http://yaozhu.top/>http://yaozhu.top/</a></strong></font>
				<font color="blue">观看直播。</font>
					
			</div>
			
			<div id="id3" style="width:100px;height:20px;float:left;solid">
				播放列表
			
				 <select  onchange="change_hlsUrl(this)" id="select0">
				 <option value='' selected>------请选择-----</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8'>CCTV-1综合</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv2hd.m3u8'>CCTV-2财经</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv3hd.m3u8'>CCTV-3综艺</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv4.m3u8'>CCTV-4中文国际</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv5.m3u8'>CCTV-5体育</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv5phd.m3u8'>CCTV-5+体育</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv6hd.m3u8'>CCTV-6电影</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv7phd.m3u8'>CCTV-7军事农业</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv8hd.m3u8'>CCTV-8电视剧</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv9.m3u8'>CCTV-9纪录</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv10hd.m3u8'>CCTV-10科教</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv11hd.m3u8'>CCTV-11戏曲</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv12.m3u8'>CCTV-12社会与法</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv13.m3u8'>CCTV-13新闻</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv14hd.m3u8'>CCTV-14少儿</option>
				 <option value='http://ivi.bupt.edu.cn/hls/cctv15.m3u8'>CCTV-15音乐</option>
				 <option value='http://ivi.bupt.edu.cn/hls/btv1hd.m3u8'>北京卫视</option>
				 <option value='http://ivi.bupt.edu.cn/hls/btv11hd.m3u8'>北京纪实</option>
				 <option value='http://ivi.bupt.edu.cn/hls/hunanhd.m3u8'>湖南卫视</option>
				 <option value='http://ivi.bupt.edu.cn/hls/zjhd.m3u8'>浙江卫视</option>
				 <option value='http://ivi.bupt.edu.cn/hls/jshd.m3u8'>江苏卫视</option>
				 <option value='http://ivi.bupt.edu.cn/hls/dfhd.m3u8'>东方卫视</option>
				 <option value='http://ivi.bupt.edu.cn/hls/hbhd.m3u8'>湖北卫视</option>
				 
				 <option value='http://ivi.bupt.edu.cn/hls/chchd.m3u8'>CHC高清电影</option>
				 <option value='http://ivi.bupt.edu.cn/hls/btv4.m3u8'>北京影视</option>
				 <option value='http://223.82.250.72/live/fhchinese/1.m3u8'>凤凰中文HD</option>
				 <option value='http://221.179.217.70/PLTV/88888888/224/3221225942/1.m3u8'>凤凰卫视高清</option>
				 
				 <option value='https://vip888.kuyun99.com/20180824/WJB07qKa/index.m3u8'>系列惊悚片Friday-the-13th</option>
				 
				 <option value='http://zhibo.hkstv.tv/livestream/mutfysrq/playlist.m3u8'>香港卫视</option>
				 <option value='http://223.110.241.206:6610/gitv/live1/G_CCTV-NEWS/G_CCTV-NEWS/'>CGTN-国际电视台1</option>
				 
				 <option value='https://live.cgtn.com/1000/prog_index.m3u8'>CGTN-国际电视台2</option>
				 
				 <option value='http://hls-ott-zhibo.wasu.tv/live/332/index.m3u8'>睡前故事</option>
				 
				 </select>
				
				m3u8: <input type="text" id="m3u8Url_text" value="">
				<button onclick="input_change_hlsUrl()">确定</button>
				
				
			</div>
			<div id="id4" style="clear:both"></div> 
        </div> 
        
    </body>  
  <script type="text/javascript">
	//播放地址
	var hlsUrl="";//需要替换为自己的视频流地址
	var tvName = ""
	
	// 下拉列表修改源
	var change_hlsUrl = function(t){
        tvName = t.options[t.selectedIndex].text;
        hlsUrl = t.value;
        
        //换地址后方法重新调用
        alert("稍等片刻，流畅播放:  " +  tvName);
		loadVideo(hlsUrl, tvName);
    }
    
	
    // 输入修改源
    function input_change_hlsUrl(){
		var hlsUrl = document.getElementById('m3u8Url_text').value;
		
		//换地址后方法重新调用
        alert("稍等片刻，流畅播放:  " +  hlsUrl);
		loadVideo(hlsUrl, hlsUrl);
    }
	
	
	//播放视频流 
    function loadVideo(hlsUrl, tvName){
	var video = document.getElementById('video');//获取 video 标签
	if(Hls.isSupported()) {
	var hls = new Hls();//实例化 Hls 对象
	hls.loadSource(hlsUrl);//传入路径
	hls.attachMedia(video);
	hls.on(Hls.Events.MANIFEST_PARSED,function() {
		   video.play();//调用播放 API
		});
	} else if (video.canPlayType('application/vnd.apple.mpegurl')) {
	          video.src = hlsUrl;
	          video.addEventListener('loadedmetadata',function() {
	              video.play();
	          });
	      }
    }
		
  //方法调用
  loadVideo(hlsUrl, tvName);
  </script>
</html>